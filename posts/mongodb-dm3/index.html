<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Patterns 1" /><meta name="author" content="Babin" /><meta property="og:locale" content="en" /><meta name="description" content="Patterns Patterns are very exciting because they are the most powerful tool for designing schemas for MongoDB and NoSQL. Patterns are not full solution to problems. Those are called full solutions. Patterns are a smaller section of those solutions. They are reusable units of knowledge." /><meta property="og:description" content="Patterns Patterns are very exciting because they are the most powerful tool for designing schemas for MongoDB and NoSQL. Patterns are not full solution to problems. Those are called full solutions. Patterns are a smaller section of those solutions. They are reusable units of knowledge." /><link rel="canonical" href="https://babin411.github.io/posts/mongodb-dm3/" /><meta property="og:url" content="https://babin411.github.io/posts/mongodb-dm3/" /><meta property="og:site_name" content="Babin Joshi" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-06-17T00:00:00+05:45" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Patterns 1" /><meta name="twitter:site" content="@BabinJoshi411" /><meta name="twitter:creator" content="@Babin" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Babin"},"dateModified":"2022-06-17T00:00:00+05:45","datePublished":"2022-06-17T00:00:00+05:45","description":"Patterns Patterns are very exciting because they are the most powerful tool for designing schemas for MongoDB and NoSQL. Patterns are not full solution to problems. Those are called full solutions. Patterns are a smaller section of those solutions. They are reusable units of knowledge.","headline":"Patterns 1","mainEntityOfPage":{"@type":"WebPage","@id":"https://babin411.github.io/posts/mongodb-dm3/"},"url":"https://babin411.github.io/posts/mongodb-dm3/"}</script><title>3. Patterns 1 | Babin Joshi</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Babin Joshi"><meta name="application-name" content="Babin Joshi"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" /assets/img/dp.png " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Babin Joshi</a></div><div class="site-subtitle font-italic">Life is a cruel prank played on the living - Charles Boyle</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/babin411" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/BabinJoshi411" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['j.babin411','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>3. Patterns 1</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>3. Patterns 1</h1><div class="post-meta text-muted"><div> By <em> <a href="https://twitter.com/Babinjoshi411">Babin Joshi</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" data-ts="1655403300" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-06-17 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2465 words"> <em>13 min</em> read</span></div></div></div><div class="post-content"><h2 id="patterns"><span class="mr-2">Patterns</span><a href="#patterns" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>Patterns are very exciting because they are the most powerful tool for designing schemas for MongoDB and NoSQL. Patterns are not full solution to problems. Those are called full solutions. Patterns are a smaller section of those solutions. They are reusable units of knowledge.</p><p>We will see how to optimize when faced with large documents with a subset pattern, use the computed pattern to avoid repeated computations, structure similar fields with the attribute pattern, handle changes to your deployment without downtime with the schema versioning pattern, and much more.</p><p>Those patterns will also serve as a common language for your teams working on schema designs. Finally, having well-defined patterns and understanding when and how to use them will remove a little bit of the are in data modeling for MongoDB and make the process more predictable.</p><h2 id="handling-duplication-staleness-and-referential-integrity"><span class="mr-2">Handling Duplication Staleness and Referential Integrity</span><a href="#handling-duplication-staleness-and-referential-integrity" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>Patterns are a way to get the best out of your data model. Often, the main goal is to optimize your schema to respond to some performance operation or optimize it for a given use case or access pattern.</p><p>However, many patterns lead to some situation that would require some additional actions. For example: -</p><ol><li>Duplication: Duplicating data across documents<li>Data Staleness: Accepting staleness in some pieces of data<li>Data Integrity Issues: Writing extra applicaiton side logic to ensure referential integrity</ol><p>Choosing a pattern to be applied to your schema requires taking into account these three concerns. If these concerns are more important than the potential simplicity of performance gains provided by the pattern, you should not use the pattern.</p><h3 id="duplication"><span class="mr-2">Duplication</span><a href="#duplication" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>Why do we have duplication? It is usually the result of embedding information in a given document for faster access. The concern is that it makes handling changes to duplicated information a challenge for correctness and consistency, where multiple documents across different collections may need to be updated. There is this general misconception that duplication should not exist. In some cases, duplication is better than no duplication. However, not all pieces of information are affected in the same way by duplication.</p><p>Let’s start with a situation where duplicating information is better than not doing it.</p><p>Let’s link orders of products to the address of the customer that placed the order by using a reference to a customer document. Updating the address for this customer updates information for the already fulfilled shipments, order that have been already delivered to the customer. This is not the desired behavior. The shipments were made to the customer’s address at that point in time, either when the order was made or before the customer changed their address. So the address reference in a given order is unlikely to be changed.</p><p>Embedding a copy of the address within the shipment document will ensure we keep the correct value. When the customer moves, we add another shipping address on file. Using this new address for new orders, does not affect the already shipped orders.</p><p>The next duplication situation to consider is when the copy data does not ever change.</p><p>Let’s say we want to model movies and actors. Movies have many actors and actors play in many movies. So this is a typical many-to-many relationship. Avoiding duplication in a many-to-many relationship requires us to keep two collections and create references between the documents in the two collections. If we list the actors in a given movie document, we are creating duplication. However, once the movie is released, the list of actors does not change. So duplication on this unchanging information is also perfectly acceptable.</p><p>This leaves us with the last duplication situation, the duplication of a piece of information that needs to or may change with time.</p><p>For this example, let’s use the revenues for a given movie, which is stored within the movie, and the revenues earned per screening. Oh, yeah, with said duplication add to be a single value in two locations. In this case, we have duplication between the sum store in the movie document and the revenue store in the screening documents used to compute the total sum. This type of situation, where we must keep multiple values in sync over time, makes us ask the question is the benefit of having this sum precomputed surpassing the cost and trouble of keeping it in sync? If yes, then use this computed pattern. If not, don’t use it.</p><p>Here, if we want the sum to be synchronized, it may be the responsibility of the application to keep it in sync. Meaning, whenever the application writes a new document to the collection or updates the value of an existing document, it must update the sum. Alternatively, we could add another application or job to do it.</p><h3 id="staleness"><span class="mr-2">Staleness</span><a href="#staleness" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>Staleness is about facing a piece of data to a user that may have been out of date. We now live in a world that has more staleness than a few years ago. Due to globalization and the world being flatter, systems are now accessed by millions of concurrent users, impacting the ability to display up-to-the-second data to all these users more challenging.</p><p>For example, the availability of a product that is shown to a user may still have to be confirmed at checkout time. The same goes for prices of plane tickets or hotel rooms that change right before you book them.</p><p><strong>Why do you get staleness?</strong> New events come along at such a fast rate that updating data constantly can cause performance issues. The main concern when solving this issue is data quality and reliability. We want to be able to trust the data that is stored in the database.</p><p>The right question is, for how long can the user tolerate not seeing the most up-to-date value for a specific field. For example, the user’s threshold for seeing if something is still available to buy is lower than knowing how many people view or purchase a given item. When performing analytic the queries it is often understood that the data may be stale and that the data being analyzed is based on some past snapshot. Analytic queries are often run on the secondary node, which often may have stale data. It may be a fraction of a second or a few seconds out of date. However, it is enough to break any guarantee that we’re looking at the latest data recorded by the system.</p><p>The solution to resolve staleness in the world of big data is to batch updates.</p><p>As long as the updates are run within the acceptable thresholds, staleness is not a significant problem. So, yes, every piece of data has a threshold for acceptable staleness that goes from 0 to whatever makes sense for given piece of information. A common a way to refresh stale data is to use a Change Stream to see what has changed in some documents and derive a list of dependent piece of data to be updated.</p><h3 id="referential-integrity"><span class="mr-2">Referential Integrity</span><a href="#referential-integrity" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></h3><p>Our third concern, when using patterns, is referential integrity. Referential integrity has some similarities to staleness. It may be OK for the system to have some extra or missing links, as long as they get corrected within the given period of time.</p><p><strong>Why do we get refferential integrity issues?</strong> Frequently, it may be the result of deleting a piece of information [INAUDIBLE] document– for example, without deleting the references to it. In the big data world, we can also associate referential integrity issues to adding distributed system, where a related piece of information live on different machines.</p><p>At this time, the MongoDB server does not support foreign keys and associated cascading deletes and updates responsible for keeping referential integrity. It is the responsibility of the application to do so. Here again, the main concern is data quality and reliability.</p><h2 id="attribute-pattern"><span class="mr-2">Attribute Pattern</span><a href="#attribute-pattern" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>Polymorphic, one of the most frequent schema design patterns used in MongoDB.Polymorphic is when you put different products, like these three examples, in one collection without going through relational acrobatics.</p><p>Our products should have an identification like manufacturer, brand, sub-brand, enterprise that are common across the majority of products. Products’ additional fields that are common across many products, like color and size– either these values may have different units and means different things for the different products. For example the size of a beverage made in the US maybe measured as ounces, while the same drink in Europe will be measured in milliliters. As for MongoDB charger, well, the size is measured according to its three dimensions. For the size of a Cherry Coke six-pack, we would say 12 ounces for a single can, six times 12 ounces, or 72 ounces to count the full six-pack. Ultimately we could list the physical dimension and report the amount of the liquid in that field. Note that physical dimensions for a beverage make sense if your main concern is the storage or transportation of the product, not the drinking of it. Then there is the third list of fields, the set of fields that are not going to exist in all the products. You may not even know where they are in advance.</p><p>They may exist in the new description that your supplier is providing you. For a sugary drink, you may want to know the type of sweetener, while for a battery, you are more interested in its specifications, like the amount of electricity provides. For the characteristics that are almost always present, we keep them as fields those qualify as the common schema part.</p><p>Schema and indexing may appear in the third list of fields. To search effectively on one of those fields, you need an index. For example, searching on the capacity for my battery would require an index. Searching on the voltage output of my battery would also require an index. If you have tons of fields, you may have a lot of indexes.</p><p>Remember some of the characteristics may be very specific to a few products and the list of fields may be unpredictable. Each addition or discovery of a new characteristic may require you to add an index, modify your schema validators, and modify your user interface to show the new information. For this case you want to use the attribute pattern.</p><p>We might want to use the attribute pattern.</p><ol><li>identify the fields to tranpose<li>for each field and its value a named tuple is created: <code class="language-plaintext highlighter-rouge">{k: "name_of_the_field", v: "value_of_the_field"}</code> and place them all inside a new array property (<code class="language-plaintext highlighter-rouge">props</code>, for instance). There could be a third field in the tuple with the unit, for example.<li>Create an index on <code class="language-plaintext highlighter-rouge">{props.k: 1, props.v: 1}</code></ol><p>Another example: a movie has differnet dates of release in different countries:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre>    {
        title: "Dunkirk",
        release_USA: "2017/07/23",
        release_Mexico: "2017/08/01",
        release_France: "2017/08/01",
        ...
    }
</pre></table></code></div></div><p>What if we wanted to find all the movies released between two dates across all countries? Moving to</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre>    {
        title: "Dunkirk",
        releases: [
            {k: "USA", v: "2017/07/23" },
            {k: "Mexico", v: "2017/08/01"},
            {k: "France":, v: "2017/08/01" }
        ]
        ...
    }
</pre></table></code></div></div><p>makes the query so much simple</p><p><strong>Problem</strong></p><ul><li>Lot’s of similar fields with similar types and need to search across those fields at once.<li>Another case is when only a subset of documetns have many similar fields.</ul><p><strong>Solution</strong> Transform fields into a new array property of key, value pairs with the key being the name of the field and the value, its value. Then create an index containing both key and value</p><p><strong>Use Cases</strong></p><ul><li>Searchable characteristics of a product<li>Set of fields all having the same value type (list of dates)</ul><p><strong>Benefits/Tradeoffs</strong></p><ul><li>Easier to index<li>Allow variety of field names<li>Allows qualifying the relationship between key and value with a third tuple field.</ul><h2 id="extended-reference-pattern"><span class="mr-2">Extended Reference Pattern</span><a href="#extended-reference-pattern" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>If you find yourself “joining” data between collections, event if the query is not so horrid, with a high volume of data, performance is a liability.</p><p>Before <code class="language-plaintext highlighter-rouge">lookup</code>, all joining had to be done in the application with multiple queries involved.</p><p><code class="language-plaintext highlighter-rouge">graphLookup</code> allows recursive queries on the same collection, like on graph databases.</p><p>Another way would be embedding in the one-side of the 1-* relationship. But… what if the joins come from the other side? Imagine a 1-* between a customer and its orders. But we usually query orders, not customers.</p><p>Embedding the most used information (duplication) in the many-side while maintaining the reference field in the many, allows us to not having to join most of the time, but joining if we must at the expense of duplication.</p><p>Duplication management:</p><ul><li>minimize it: duplicate fields that change rarely and only the fields needed to avoid the join<li>After change in “master” information: identify what needs to be chanaged and do it straight away if we must or wait for a batch update to do it at a later stage</ul><p>In the example, duplicating is the right thing to do.</p><p><strong>Problem</strong></p><ul><li>too many repetitive joins</ul><p><strong>Solution</strong></p><ul><li>identify the field on the lookup side<li>bring in those fields into the main object</ul><p><strong>Use Cases</strong> -Catalog, mobile applications, real-time analytics.</p><p>That is: optimize read operations by avoiding round-trips or touching too many pieces of data.</p><p><strong>Benefits/Trade-offs</strong></p><ul><li>✔ Faster reads<li>✔ Reduced number of joins and lookups<li>✘ Duplication if the extended reference contains data that changes a lot</ul><h2 id="subset-pattern"><span class="mr-2">Subset Pattern</span><a href="#subset-pattern" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>MongoDB tries to put in memory the working set (docs and portion of indexes that are accessed).</p><p>If the working set does not fit in memory, MongoDB will start trying to occupy RAM and there will be a constant thrashing of data trying to make it to RAM just to be evicted shortly after for other data to get there.</p><p><strong>Solutions:</strong></p><ul><li>add more RAM (or more nodes to the cluster)<li>scale with sharding (or are more shards)<li>reduce the size of the working set</ul><p>Will focus on third. Get rid of part of huge documents that is not used so often.</p><p>For example, for a movie, people might want to access only the main actors, top reviews or quotes. The rest can go into a separate collection.</p><p><strong>Problem</strong> Working set does not fit in memory</p><p>Or only some of the data of the working set is frequently used.</p><p>Lots of pages evicted from memory</p><p><strong>Solution</strong> Divide the document in two: fields that are often required and fields that are rarely required.</p><p>The resulting relationship will be a 1-1 or 1-*. Part of the information is duplicated in the most used side.</p><p><strong>Use Cases</strong></p><ul><li>List of review of a product.<li>List of comments on an article<li>List of actors in a movie</ul><p><strong>Benefits/Trade-offs</strong></p><ul><li>✔ Smaller working set as most used docs are smaller<li>✔ Short disk access from most used collection<li>✘ More round trips to the server when accessing less frequent information<li>✘ Mor disk usage as information is duplicated</ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/mongodb/'>MongoDB</a>, <a href='/categories/mongodb-data-modeling/'>MongoDB Data Modeling</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/mongodb/" class="post-tag no-text-decoration" >mongodb</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=3. Patterns 1 - Babin Joshi&amp;url=https://babin411.github.io/posts/mongodb-dm3/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=3. Patterns 1 - Babin Joshi&amp;u=https://babin411.github.io/posts/mongodb-dm3/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https://babin411.github.io/posts/mongodb-dm3/&amp;text=3. Patterns 1 - Babin Joshi" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/wildcards/">Wild Cards Tutorial</a><li><a href="/posts/Linux-Basic-Commands/">Basic Linux Commands</a><li><a href="/posts/3sql4/">Window Functions</a><li><a href="/posts/pandas1/">Introduction to Pandas</a><li><a href="/posts/mongodb-dm4/">4. Patterns 2</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/sql/">sql</a> <a class="post-tag" href="/tags/t-sql/">t-sql</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/mongodb/">mongodb</a> <a class="post-tag" href="/tags/curl/">curl</a> <a class="post-tag" href="/tags/wget/">wget</a> <a class="post-tag" href="/tags/avg/">avg</a> <a class="post-tag" href="/tags/count/">count</a> <a class="post-tag" href="/tags/max/">max</a> <a class="post-tag" href="/tags/min/">min</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/mongodb-dm1/"><div class="card-body"> <em class="timeago small" data-ts="1655316900" > 2022-06-16 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>1. Introduction to Data Modeling</h3><div class="text-muted small"><p> One of the most common misconceptions about data modeling in MongoDB is that modeling is schemaless, meaning that it doesn’t really matter which field documents have or how different the documents ...</p></div></div></a></div><div class="card"> <a href="/posts/mongodb-dm2/"><div class="card-body"> <em class="timeago small" data-ts="1655316900" > 2022-06-16 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>2. Introduction to Relationships</h3><div class="text-muted small"><p> Relationships with MongoDB Even if MongoDB is classified as a document database, the pieces of information stored in the database still have relationships between them. Understanding how to represe...</p></div></div></a></div><div class="card"> <a href="/posts/mongodb-dm4/"><div class="card-body"> <em class="timeago small" data-ts="1655403300" > 2022-06-17 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>4. Patterns 2</h3><div class="text-muted small"><p> Computed Patttern Some computations are complex and if we store the operands of the computation separately, we can end up with poor peformance. Math operations: sum, average, median,… usua...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/mongodb-dm2/" class="btn btn-outline-primary" prompt="Older"><p>2. Introduction to Relationships</p></a> <a href="/posts/mongodb-dm4/" class="btn btn-outline-primary" prompt="Newer"><p>4. Patterns 2</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://twitter.com/Babinjoshi411">Babin Joshi</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/sql/">sql</a> <a class="post-tag" href="/tags/t-sql/">t-sql</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/mongodb/">mongodb</a> <a class="post-tag" href="/tags/curl/">curl</a> <a class="post-tag" href="/tags/wget/">wget</a> <a class="post-tag" href="/tags/avg/">avg</a> <a class="post-tag" href="/tags/count/">count</a> <a class="post-tag" href="/tags/max/">max</a> <a class="post-tag" href="/tags/min/">min</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
